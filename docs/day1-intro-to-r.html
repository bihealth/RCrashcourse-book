<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.54">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>1&nbsp; Day 1: Introduction to R – A Five Day Crash Course in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./day2-complex-structures.html" rel="next">
<link href="./intro.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="custom.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./day1-intro-to-r.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Day 1: Introduction to R</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">A Five Day Crash Course in R</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./day1-intro-to-r.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Day 1: Introduction to R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./day2-complex-structures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Day 2: Complex data structures</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./day3-reading-your-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Day 3: Reading and Writing Files</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./day4-manipulating-your-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">day4-manipulating-your-data.html</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./day5-visualization-and-statistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">day5-visualization-and-statistics.html</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#goals-for-today" id="toc-goals-for-today" class="nav-link active" data-scroll-target="#goals-for-today"><span class="header-section-number">1.1</span> Goals for today</a></li>
  <li><a href="#r-rstudio-and-other-languages" id="toc-r-rstudio-and-other-languages" class="nav-link" data-scroll-target="#r-rstudio-and-other-languages"><span class="header-section-number">1.2</span> R, RStudio and other languages</a>
  <ul class="collapse">
  <li><a href="#why-r" id="toc-why-r" class="nav-link" data-scroll-target="#why-r"><span class="header-section-number">1.2.1</span> Why R?</a></li>
  <li><a href="#r-and-rstudio" id="toc-r-and-rstudio" class="nav-link" data-scroll-target="#r-and-rstudio"><span class="header-section-number">1.2.2</span> R and RStudio</a></li>
  <li><a href="#r-and-other-languages" id="toc-r-and-other-languages" class="nav-link" data-scroll-target="#r-and-other-languages"><span class="header-section-number">1.2.3</span> R and other languages</a></li>
  </ul></li>
  <li><a href="#projects-and-workspaces" id="toc-projects-and-workspaces" class="nav-link" data-scroll-target="#projects-and-workspaces"><span class="header-section-number">1.3</span> Projects and Workspaces</a>
  <ul class="collapse">
  <li><a href="#creating-a-project-start-here" id="toc-creating-a-project-start-here" class="nav-link" data-scroll-target="#creating-a-project-start-here"><span class="header-section-number">1.3.1</span> Creating a project: start here!</a></li>
  <li><a href="#workspaces-history-and-environments" id="toc-workspaces-history-and-environments" class="nav-link" data-scroll-target="#workspaces-history-and-environments"><span class="header-section-number">1.3.2</span> Workspaces, history and environments</a></li>
  <li><a href="#tab-completion" id="toc-tab-completion" class="nav-link" data-scroll-target="#tab-completion"><span class="header-section-number">1.3.3</span> Tab completion</a></li>
  </ul></li>
  <li><a href="#lets-start-with-r" id="toc-lets-start-with-r" class="nav-link" data-scroll-target="#lets-start-with-r"><span class="header-section-number">1.4</span> Let’s start with R</a>
  <ul class="collapse">
  <li><a href="#r-as-a-calculator" id="toc-r-as-a-calculator" class="nav-link" data-scroll-target="#r-as-a-calculator"><span class="header-section-number">1.4.1</span> R as a calculator</a></li>
  <li><a href="#using-script-files" id="toc-using-script-files" class="nav-link" data-scroll-target="#using-script-files"><span class="header-section-number">1.4.2</span> Using script files</a></li>
  <li><a href="#variables" id="toc-variables" class="nav-link" data-scroll-target="#variables"><span class="header-section-number">1.4.3</span> Variables</a></li>
  <li><a href="#character-variables" id="toc-character-variables" class="nav-link" data-scroll-target="#character-variables"><span class="header-section-number">1.4.4</span> Character variables</a></li>
  </ul></li>
  <li><a href="#vectors-and-vectorization" id="toc-vectors-and-vectorization" class="nav-link" data-scroll-target="#vectors-and-vectorization"><span class="header-section-number">1.5</span> Vectors and vectorization</a>
  <ul class="collapse">
  <li><a href="#vectors" id="toc-vectors" class="nav-link" data-scroll-target="#vectors"><span class="header-section-number">1.5.1</span> Vectors</a></li>
  <li><a href="#named-vectors" id="toc-named-vectors" class="nav-link" data-scroll-target="#named-vectors"><span class="header-section-number">1.5.2</span> Named vectors</a></li>
  <li><a href="#assigning-values-to-selected-elements" id="toc-assigning-values-to-selected-elements" class="nav-link" data-scroll-target="#assigning-values-to-selected-elements"><span class="header-section-number">1.5.3</span> Assigning values to selected elements</a></li>
  <li><a href="#vectorization" id="toc-vectorization" class="nav-link" data-scroll-target="#vectorization"><span class="header-section-number">1.5.4</span> Vectorization</a></li>
  <li><a href="#the-special-value-na" id="toc-the-special-value-na" class="nav-link" data-scroll-target="#the-special-value-na"><span class="header-section-number">1.5.5</span> The special value <code>NA</code></a></li>
  </ul></li>
  <li><a href="#putting-it-all-together" id="toc-putting-it-all-together" class="nav-link" data-scroll-target="#putting-it-all-together"><span class="header-section-number">1.6</span> Putting it all together</a>
  <ul class="collapse">
  <li><a href="#water-lillies-on-a-lake" id="toc-water-lillies-on-a-lake" class="nav-link" data-scroll-target="#water-lillies-on-a-lake"><span class="header-section-number">1.6.1</span> Water lillies on a lake</a></li>
  <li><a href="#functions-in-r" id="toc-functions-in-r" class="nav-link" data-scroll-target="#functions-in-r"><span class="header-section-number">1.6.2</span> Functions in R</a></li>
  </ul></li>
  <li><a href="#coding-practices" id="toc-coding-practices" class="nav-link" data-scroll-target="#coding-practices"><span class="header-section-number">1.7</span> Coding practices</a>
  <ul class="collapse">
  <li><a href="#computer-programs-as-means-for-communication" id="toc-computer-programs-as-means-for-communication" class="nav-link" data-scroll-target="#computer-programs-as-means-for-communication"><span class="header-section-number">1.7.1</span> Computer programs as means for communication</a></li>
  <li><a href="#example" id="toc-example" class="nav-link" data-scroll-target="#example"><span class="header-section-number">1.7.2</span> Example</a></li>
  </ul></li>
  <li><a href="#review" id="toc-review" class="nav-link" data-scroll-target="#review"><span class="header-section-number">1.8</span> Review</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Day 1: Introduction to R</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="goals-for-today" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="goals-for-today"><span class="header-section-number">1.1</span> Goals for today</h2>
<ul>
<li>what is R?</li>
<li>why use R?</li>
<li>first steps in R</li>
</ul>
<p>What you should know after today:</p>
<ul>
<li>what R is</li>
<li>how to start R</li>
<li>how to use R as a calculator</li>
<li>how to assign variables</li>
<li>how to use functions</li>
<li>how to use vectors</li>
<li>how to use data frames</li>
<li>how to use packages</li>
</ul>
</section>
<section id="r-rstudio-and-other-languages" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="r-rstudio-and-other-languages"><span class="header-section-number">1.2</span> R, RStudio and other languages</h2>
<section id="why-r" class="level3" data-number="1.2.1">
<h3 data-number="1.2.1" class="anchored" data-anchor-id="why-r"><span class="header-section-number">1.2.1</span> Why R?</h3>
</section>
<section id="r-and-rstudio" class="level3" data-number="1.2.2">
<h3 data-number="1.2.2" class="anchored" data-anchor-id="r-and-rstudio"><span class="header-section-number">1.2.2</span> R and RStudio</h3>
<p>R is the name of both, the programming language and of the language <em>interpreter</em>. When you start RStudio, you can see the R language interpreter working in the part of the window left and bottom - called “console”. So yes, you don’t need RStudio to work with R and, in fact, many people prefer to work with R in a different environment.</p>
<p>RStudio is a so called IDE, an Integrated Development Environment. That is, it provides a lot of goodies that help make your work easier, faster and more efficient.</p>
</section>
<section id="r-and-other-languages" class="level3" data-number="1.2.3">
<h3 data-number="1.2.3" class="anchored" data-anchor-id="r-and-other-languages"><span class="header-section-number">1.2.3</span> R and other languages</h3>
<p>R is not the only language that you can use for data analysis. There are many other languages that are used for this purpose, including Python, Matlab and many others. Each of these languages has its own strengths and weaknesses, and the choice of language depends on your needs. In fact, most bioinformaticians know more than one language, and use the one that is best suited for the task at hand.</p>
<p>We think that R is a particularly good choice for all those who just need a tool to use from time to time to help them with their work. It is relatively easy to learn, and it is very powerful. However, other choices are also worth mentioning.</p>
<p><strong>Matlab</strong> is a language that is in many ways similar to R. The main differnce is maybe that unlike R, Matlab is not free – it is closed source and you have to pay for a license. This has some advantages. For example, and as you will see during this course, R development is not centralized and so there are many packages that do the same thing. Matlab is in some aspects more consistent and more polished than R, and in some comparisons appears to be faster – and for this, it is often the language of choice for areas such as image analysis.</p>
<p><strong>Python</strong> is completely different story. This is a powerful, fast, general purpose programming language. It is more versatile than R, has a much more standardized syntax and development process. However, it is harder to learn and it is not really meant to be used interactively (although it can be – especially when combined with Quarto or Jupyter Notebook). While many statistical modules exist for Python, it is not as strong in this area as R.</p>
</section>
</section>
<section id="projects-and-workspaces" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="projects-and-workspaces"><span class="header-section-number">1.3</span> Projects and Workspaces</h2>
<section id="creating-a-project-start-here" class="level3" data-number="1.3.1">
<h3 data-number="1.3.1" class="anchored" data-anchor-id="creating-a-project-start-here"><span class="header-section-number">1.3.1</span> Creating a project: start here!</h3>
<p>When starting work with a new project, do the following: (i) create a new directory for the project, (ii) open an R script file and save it in the directory you created and (iii) copy necessary data files.</p>
<p>To create a new directory in RStudio, go to File -&gt; New Project. When the dialog window appears, select first “New Directory” and then “New Project”. Select the location where you would like to have the directory created and click on “Create Project”.</p>
<div class="callout callout-style-simple callout-caution no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exr-create" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 1.1</strong></span> &nbsp;</p>
<ul>
<li>Create a new project in RStudio. Do it now, you will continue to work with this project over the next few days (we hope).</li>
<li>Inspect the contents of the project directory. What files are there?</li>
</ul>
</div>
</div>
</div>
</div>
<p>When Rstudio creates a new project, it creates a new directory with the same name as the project. Furthermore, it creates a new file in this directory called <code>projectname.Rproj</code>. This file is used by RStudio to keep track of project-specific settings.</p>
<p>You can open this file by double-clicking on it in the Files pane in RStudio. Like most of the files that you will be working with, it is a simple text file: you can open it in any text editor, including RStudio.</p>
<p>Later on, if you choose to do so, R can create two hidden files, <code>Rhistory</code> (called <code>.Rhistory</code> on Unix-like systems and <code>_Rhistory</code> on Windows) and <code>.RData</code> (or <code>_RData</code>). This files save the state of your R session (of your R workspace, to be specific).</p>
</section>
<section id="workspaces-history-and-environments" class="level3" data-number="1.3.2">
<h3 data-number="1.3.2" class="anchored" data-anchor-id="workspaces-history-and-environments"><span class="header-section-number">1.3.2</span> Workspaces, history and environments</h3>
</section>
<section id="tab-completion" class="level3" data-number="1.3.3">
<h3 data-number="1.3.3" class="anchored" data-anchor-id="tab-completion"><span class="header-section-number">1.3.3</span> Tab completion</h3>
</section>
</section>
<section id="lets-start-with-r" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="lets-start-with-r"><span class="header-section-number">1.4</span> Let’s start with R</h2>
<section id="r-as-a-calculator" class="level3" data-number="1.4.1">
<h3 data-number="1.4.1" class="anchored" data-anchor-id="r-as-a-calculator"><span class="header-section-number">1.4.1</span> R as a calculator</h3>
<p>You can use R as a very powerful calculator. For example, do you want to know what <span class="math inline">\(\sin(\pi/2)\)</span> is? Just type <code>sin(pi/2)</code> in the console and press <code>Enter</code>. Addition and subtraction work, as expected, with <code>+</code> and <code>-</code>. To multiply two numbers, type <code>2*3</code>; to divide, type <code>2/3</code>. You can get exponents (powers, eg. <span class="math inline">\(2^3\)</span>) by typing <code>2^3</code>. If the <code>^</code> symbol (called “caret”) is not available on your keyboard, you can use <code>**</code> instead. Parentheses <code>()</code> are used to group expressions, just like in mathematics. To logarithmize, you can use <code>log()</code>, <code>log2()</code> and <code>log10()</code> functions. For example, to calculate <span class="math inline">\(\log_{10}(100)\)</span>, type <code>log10(100)</code>. Can you guess how to calculate <span class="math inline">\(\sqrt{2}\)</span>? Yes, you are right: <code>sqrt(2)</code>. Or <code>2^(1/2)</code>, that will also do.</p>
<div class="callout callout-style-simple callout-caution no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exr-calc" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 1.2</strong></span> Calculate the following expressions in R:</p>
<ul>
<li><span class="math inline">\(\log_{2}(8)\)</span></li>
<li><span class="math inline">\(\sin(\pi)\)</span></li>
<li><span class="math inline">\(2^{10}\)</span></li>
<li><span class="math inline">\(\sqrt{e}\)</span></li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="using-script-files" class="level3" data-number="1.4.2">
<h3 data-number="1.4.2" class="anchored" data-anchor-id="using-script-files"><span class="header-section-number">1.4.2</span> Using script files</h3>
<p>On the left side of the RStudio window you have (by default) two panels: the lower one is called “Console”. When you create a new script file, it appears above.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Typing in console
</div>
</div>
<div class="callout-body-container callout-body">
<p>You <em>can</em> type your commands (properly called “expressions”) directly into the console, but it is generally not a good idea. Why? The truthful answer is: because it is messy and sooner or later you will regret it. You <em>can</em> save the history of what you type in the console, but it is easier (and cleaner) to save your program in a script file.</p>
</div>
</div>
<p>When you open or create an R script file and type something into it, you can run it by pressing <code>Ctrl+Enter</code> (or <code>Cmd+Enter</code> on Mac). This will send the line of code to the console, where it will be executed. You can also <strong>select</strong> a fragment of the code before you press <code>Ctrl+Enter</code>, and then the whole selected fragment will be sent to the console.</p>
<p>However, if you start your line with <code>#</code>, it will not be executed. This is called a <strong>comment</strong> and we will spend some time later on convincing you that you should use a lot of comments in your code.</p>
<div class="callout callout-style-simple callout-caution no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exr-script" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 1.3</strong></span> Repeat <a href="#exr-calc" class="quarto-xref">Exercise&nbsp;<span>1.2</span></a>, but now type the expressions into the script which you have created in <a href="#exr-create" class="quarto-xref">Exercise&nbsp;<span>1.1</span></a>. Run the script by pressing <code>Ctrl+Enter</code> after each line.</p>
</div>
</div>
</div>
</div>
<p>Script files are also text documents. You can open them in any text editor, for example Notepad or even Word (but don’t do that). In RStudio, you see the script file in many colors: for example, comments can be green, strings (text in quotes) can be red, and so on. This is called <strong>syntax highlighting</strong> and is done by RStudio to make your code more readable. You will not see the colors when you open your R script in Notepad.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>From now on, you should only type your code in script files.</p>
</div>
</div>
</section>
<section id="variables" class="level3" data-number="1.4.3">
<h3 data-number="1.4.3" class="anchored" data-anchor-id="variables"><span class="header-section-number">1.4.3</span> Variables</h3>
<p>What if we want to store the result of a calculation for later use? We can do this by assigning the result to a variable. In R, you assign a value to a variable using the <code>&lt;-</code> operator:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>x <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>y <span class="ot">&lt;-</span> <span class="fu">sin</span>(pi<span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb1-3"><a href="#cb1-3"></a>z <span class="ot">&lt;-</span> x <span class="sc">+</span> y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you want to see the value of a variable, just type its name in the console and press <code>Enter</code>, or use <code>print()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">print</span>(z)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Assignment operator
</div>
</div>
<div class="callout-body-container callout-body">
<p>Many other languages use <code>=</code> as an assignment operator. In R, you can use <code>=</code> as well, but do yourself a favour and <strong>don’t</strong>. Use <code>&lt;-</code> instead. Why? Your code will be more readable and you will avoid many common mistakes.</p>
</div>
</div>
<p>Variables are like boxes in which you can store values. However, unlike boxes, when you assign one variable to another, the first variable keeps its content:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>x <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>y <span class="ot">&lt;-</span> x</span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="fu">print</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<p>We now come to a very important point which we will revisit often, as it is one of the most common beginner (and not only beginner) mistakes. When you forget to assign the value to a variable, R will print it to the console, but the variable <strong>will not be modified</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>x <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="co"># prints 0.9092974:</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="fu">sin</span>(x) </span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co"># prints 2</span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="fu">print</span>(x) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In the code above, the value of <code>x</code> is not changed by the <code>sin()</code> function. <strong>To store the value of a function, you need to assign it to a variable</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>x <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="co"># does not print anything:</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>x <span class="ot">&lt;-</span> <span class="fu">sin</span>(x) </span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="co"># prints 0.9092974:</span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="fu">print</span>(x)    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Please spend some time on this, as it is a very common source of errors.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>As a rule of thumb<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, if the expression you type in your script does not contain the <code>&lt;-</code> operator, it will not modify any variables.</p>
</div>
</div>
<div class="callout callout-style-simple callout-caution no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exr-variables-and-rstudio" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 1.4</strong></span> Create a variable using <code>x &lt;- 42</code>. Take a look at the Environment pane in RStudio (top left part of the window). Do you notice anything?</p>
</div>
</div>
</div>
</div>
</section>
<section id="character-variables" class="level3" data-number="1.4.4">
<h3 data-number="1.4.4" class="anchored" data-anchor-id="character-variables"><span class="header-section-number">1.4.4</span> Character variables</h3>
<p>Variables can store not only numbers, but also text. Text in R is called a <strong>character string</strong>. To create a character string, you need to enclose the text in quotes (both single and double quotes are allowed, but try to be consistent and use only one type). For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>name <span class="ot">&lt;-</span> <span class="st">"January"</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>city <span class="ot">&lt;-</span> <span class="st">"Hoppegarten"</span></span>
<span id="cb8-3"><a href="#cb8-3"></a>greeting <span class="ot">&lt;-</span> <span class="st">"Hello, world!"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Character variables cannot be used with algebraic computations, the following code will throw an error:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># this does not work!</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>name <span class="sc">+</span> city</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>However, if you want to “add” two character strings (that is, concatenate them), you can use the <code>paste()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">paste</span>(name, city)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "January Hoppegarten"</code></pre>
</div>
</div>
<p>Quite often, you don’t want to have a space between the two strings. This is such a common operation that R has a shortcut for it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="fu">paste0</span>(name, city)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "JanuaryHoppegarten"</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Other types
</div>
</div>
<div class="callout-body-container callout-body">
<p>There are other types of data types in R. Later on, we will briefly touch on <em>factors</em>, which look like character strings but behave like numbers. Another important data type is a <em>logical</em> type, which can have only two values: <code>TRUE</code> and <code>FALSE</code>. We will talk about logical types in more detail tomorrow. And under the hood, numeric vectors can be either integers (numbers like 1, 2, …) or floating point numbers (numbers like 1.1, 2.2 or <span class="math inline">\(\pi\)</span>).</p>
</div>
</div>
<div class="callout callout-style-simple callout-caution no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exr-variables" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 1.5 (Variables)</strong></span> Create the following variables in your script:</p>
<ul>
<li><code>name</code> with the value of your first name</li>
<li><code>city</code> with the value of the city where you live</li>
<li><code>age</code> with the value of your age</li>
<li><code>greeting</code> with the value “Hello,”</li>
<li>concatenate the variables <code>greeting</code> and <code>name</code> and store the result in a new variable <code>message</code></li>
</ul>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="vectors-and-vectorization" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="vectors-and-vectorization"><span class="header-section-number">1.5</span> Vectors and vectorization</h2>
<section id="vectors" class="level3" data-number="1.5.1">
<h3 data-number="1.5.1" class="anchored" data-anchor-id="vectors"><span class="header-section-number">1.5.1</span> Vectors</h3>
<p>Variables can (and do) store a lot more than single values. One of the most basic and important data types in R is a <strong>vector</strong>. A vector is simply a sequence of values – just like in maths. And you know what? You have already created vectors in R. In mathematics, any scalar value can be treated as a one-dimensional vector and it is exactly like that in R: any single value is a 1-element vector, including all the variables that you have created in the previous exercise.</p>
<p>To create a vector with more than one value, you can use the <code>c()</code> function (“c” stands for “combine”). For integer numbers, you can use the <code>:</code> operator to create a sequence of numbers. For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>sequence <span class="ot">&lt;-</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">15</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">42</span>, <span class="dv">33</span>, <span class="dv">14</span>, <span class="dv">25</span>)</span>
<span id="cb14-3"><a href="#cb14-3"></a>person <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"January"</span>, <span class="st">"Weiner"</span>, <span class="st">"Hoppegarten"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>It is also possible to combine two vectors longer than 1 into one:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>first_v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb15-2"><a href="#cb15-2"></a>second_v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb15-3"><a href="#cb15-3"></a>combined_v <span class="ot">&lt;-</span> <span class="fu">c</span>(first_v, second_v)</span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="fu">print</span>(combined_v)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
</div>
<p>You can access individual elements of a vector using the <code>[ ]</code> operator:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>numbers[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>person[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Weiner"</code></pre>
</div>
</div>
<p>But hey, I told you that every value is a vector in R, right? And that includes the indices <code>1</code> and <code>2</code> that you have just used. So, what would happen if we used more than two values as an index? Try it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>numbers[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10 42 33</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>person[<span class="dv">3</span><span class="sc">:</span><span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hoppegarten" "Weiner"      "January"    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>sel <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">3</span>)</span>
<span id="cb25-2"><a href="#cb25-2"></a>numbers[sel]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10 25 33</code></pre>
</div>
</div>
<p>As you can see, not only can you use a vector as an index, but you can also use a <em>variable</em> as an index.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Do not use a comma
</div>
</div>
<div class="callout-body-container callout-body">
<p>It is tempting to select, say, first and the third element of a vector <code>numbers</code> by writing <code>numbers[1, 3]</code>. This will not work! As you will see tomorrow, this way of writing is for two-dimensional objects. You must use a vector as an index: <code>numbers[c(1, 3)]</code>.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Vectors and indices
</div>
</div>
<div class="callout-body-container callout-body">
<p>In many (most?) programming languages, the first element of a vector is accessed using the index 0. For example in Python, to access the first element of an array, you need to type <code>array[0]</code>. This has something to do with how computers work. In R, the first element is always <code>1</code> – R was designed by statisticians, and in mathematics we always start counting from 1. For some reason, this seems to make some computer scientists angry.</p>
</div>
</div>
</section>
<section id="named-vectors" class="level3" data-number="1.5.2">
<h3 data-number="1.5.2" class="anchored" data-anchor-id="named-vectors"><span class="header-section-number">1.5.2</span> Named vectors</h3>
<p>Accessing elements of a vector using indices is all well and good, but sometimes it can be very inconvenient, especially if the vectors are very long. Or maybe you do not remember the order in which you have stored the elements of the vector – was the last name first, or second element of the <code>person</code> vector?</p>
<p>Vectors allow you to name their elements. We can either define the names at the very beginning, when we create the vector, or we can add them later using the <code>names()</code> function. Here is how you can do it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>person <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">first=</span><span class="st">"January"</span>, <span class="at">last=</span><span class="st">"Weiner"</span>, <span class="at">city=</span><span class="st">"Hoppegarten"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Once you have named the elements of a vector, you can access them using their names:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>person[<span class="st">"city"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         city 
"Hoppegarten" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>person[<span class="fu">c</span>(<span class="st">"first"</span>, <span class="st">"last"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    first      last 
"January"  "Weiner" </code></pre>
</div>
</div>
</section>
<section id="assigning-values-to-selected-elements" class="level3" data-number="1.5.3">
<h3 data-number="1.5.3" class="anchored" data-anchor-id="assigning-values-to-selected-elements"><span class="header-section-number">1.5.3</span> Assigning values to selected elements</h3>
<p>OK, one more thing about vectors. Above we have selected elements from a vector. It turns out, we can do more with that selections then just print it to a console:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a>numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">42</span>, <span class="dv">33</span>, <span class="dv">14</span>, <span class="dv">25</span>)</span>
<span id="cb32-2"><a href="#cb32-2"></a>sel <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb32-3"><a href="#cb32-3"></a>numbers[sel] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">500</span>)</span>
<span id="cb32-4"><a href="#cb32-4"></a>numbers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 100  42  33  14 500</code></pre>
</div>
</div>
<p>Here is what happened: we assigned new values to the first and the fifth element of the vector <code>numbers</code>. This is a very powerful feature of R and you will be using it a lot.</p>
<div class="callout callout-style-simple callout-caution no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exr-accessing" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 1.6 (Accessing and modifying vectors)</strong></span> &nbsp;</p>
<ul>
<li>Create a vector with the first 10 prime numbers. Call it <code>primes</code>.</li>
<li>How do you access the 3rd, 5th and 7th prime number?</li>
<li>What happens when you do <code>primes[11]</code>?</li>
<li>What happens when you do <code>primes[11] &lt;- 11</code>?</li>
<li>What happens when you do <code>primes[-1]</code>?</li>
<li>Change the 3rd, 5th and 7th prime number to 100, 500 and 700, respectively.</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="vectorization" class="level3" data-number="1.5.4">
<h3 data-number="1.5.4" class="anchored" data-anchor-id="vectorization"><span class="header-section-number">1.5.4</span> Vectorization</h3>
<p>Vectors are very useful – but wait, there is more. What happens if we add a value to a vector? Try it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">42</span>, <span class="dv">33</span>, <span class="dv">14</span>, <span class="dv">25</span>)</span>
<span id="cb34-2"><a href="#cb34-2"></a>numbers <span class="sc">+</span> <span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20 52 43 24 35</code></pre>
</div>
</div>
<p>As you can see, R has added the value 10 to every single element of the vector <code>numbers</code>. The same thing happens with other operators, like <code>-</code>, <code>*</code> and <code>/</code>. Try it yourself.</p>
<p>This is called <strong>vectorization</strong> and it is one of the most powerful features of R compared to other languages. It will allow you to write very concise and, at the same time, readable code.</p>
<p>The vectorization works not only with operators like <code>+</code>, <code>-</code>, <code>*</code> and <code>/</code>, but with many functions. For example, it works with most of the mathematical functions like <code>sin()</code> or <code>log()</code>. Try it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="fu">log10</span>(numbers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.000000 1.623249 1.518514 1.146128 1.397940</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="fu">sin</span>(numbers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.5440211 -0.9165215  0.9999119  0.9906074 -0.1323518</code></pre>
</div>
</div>
<p>However, there is a catch. What happens if you try to add two vectors when both of them with more than one element? First, let us try to add two vectors of the same length:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a>numbers1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb40-2"><a href="#cb40-2"></a>numbers2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>)</span>
<span id="cb40-3"><a href="#cb40-3"></a>numbers1 <span class="sc">+</span> numbers2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5 7 9</code></pre>
</div>
</div>
<p>As you can see, R has added the first element of the first vector to the first element of the second vector, the second element of the first vector to the second element of the second vector, and so on. Makes sense, right? Same would happen if we were to subtract, multiply or divide the vectors (or use logical operations, which you will learn on Day 3). This does not look like much now, but trust me, it will be extremely useful in the future.</p>
<p>However, if the vectors have <em>different</em> lengths, it is a different story altogher. Take a look:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a>numbers1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb42-2"><a href="#cb42-2"></a>numbers2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb42-3"><a href="#cb42-3"></a>numbers1 <span class="sc">+</span> numbers2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in numbers1 + numbers2: longer object length is not a multiple of shorter object length</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5 7 7</code></pre>
</div>
</div>
<p>Ooops, what exactly happened here? First thing to note is that <em>there was no error</em>. There was a <em>warning</em>, but still our code executed and produced a result. But what is that result? For the first element of the result, it is clear enough: <code>1 + 4 = 5</code>. Same for the second, <code>2 + 5 = 7</code>. But what about the third? It seems that R added <code>3 + 4 = 7</code>. But why?</p>
<p>R noticed that it is missing an element to be added to the third element of the vector <code>numbers1</code>. So, it did what is called <strong>recycling</strong>. It “rewound” the vector <code>numbers2</code> to the beginning and added the first element of <code>numbers2</code> to the third element of <code>numbers1</code>. However, since after the rewinding and adding one element of vector <code>numbers2</code> was left (because <code>numbers1</code> did not have any more elements), R issued a warning. If the length of the first vector was a multiple of the length of the second vector, R would not have complained:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a>numbers1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>)</span>
<span id="cb45-2"><a href="#cb45-2"></a>numbers2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">8</span>)</span>
<span id="cb45-3"><a href="#cb45-3"></a>numbers1 <span class="sc">+</span> numbers2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  8 10 10 12 12 14</code></pre>
</div>
</div>
<p>See? No warning. R was recycling the second vector over and over again. Recycling is a dangerous business: if you are not careful, you can get results which you have not expected.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Recycling advice
</div>
</div>
<div class="callout-body-container callout-body">
<p>Here is our advice to you: either use a vector and a single element vector, or two vectors of the same length. And in the cases where, for some reason, you need to recycle, make sure that you know what you are doing. For example, check the length of both vectors.</p>
</div>
</div>
<p>With vectors that have only a couple of numbers it is quite easy to see what is happening, but what if you have thousands of variables? In other words, how to check the lenght of a vector? You can use the <code>length()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a><span class="fu">length</span>(numbers1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a><span class="fu">length</span>(numbers2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<div class="callout callout-style-simple callout-caution no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exr-vectorisation" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 1.7 (Vectorisation)</strong></span> &nbsp;</p>
<ul>
<li>Create a vector with several numbers and try to add, subtract, multiply and divide it by a single number. What happens?</li>
<li>Say, you have three values which are the diameters of three circles: 1, 5 and 13. You would like to have a vector containing the areas of these circles. What is the simplest way of doing that?</li>
<li>How do you check the length of this vector?</li>
<li>One vector, <code>lengths</code>, contains the lengths of the sides of three rectangles, and the other, <code>widths</code>, contains their widths. Create a vector containing the areas of these rectangles.</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="the-special-value-na" class="level3" data-number="1.5.5">
<h3 data-number="1.5.5" class="anchored" data-anchor-id="the-special-value-na"><span class="header-section-number">1.5.5</span> The special value <code>NA</code></h3>
<p>One more thing: there are a couple of special values in R that you should know about. One of the most prominent, useful and frequently encountered is the <code>NA</code> value, which stands for “Not Available”. You will see it frequently when you work with data.</p>
<p>It is possible to apply mathematical operations to <code>NA</code> values, but the result is inadvertently <code>NA</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a><span class="cn">NA</span> <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a>numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">4</span>)</span>
<span id="cb53-2"><a href="#cb53-2"></a>numbers <span class="sc">*</span> <span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  3  6 NA 12</code></pre>
</div>
</div>
<p>This also goes for some functions, which, quite often, have a special parameter to omit the <code>NA</code> values. For example, the <code>mean()</code> function calculates the mean of a vector:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1"></a>numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">4</span>)</span>
<span id="cb55-2"><a href="#cb55-2"></a><span class="fu">mean</span>(numbers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1"></a><span class="fu">mean</span>(numbers, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.333333</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Useful functions
</div>
</div>
<div class="callout-body-container callout-body">
<p>There is a whole bunch of functions that you can use to work with vectors, and here are some of them – with mostly self-explanatory names: <code>sum()</code>, <code>min()</code>, <code>max()</code>, <code>range()</code>, <code>sd()</code>, <code>var()</code>, <code>median()</code>, <code>quantile()</code>. Look them up in the help system by typing, for example, <code>?sum</code> in the console.</p>
</div>
</div>
<p>The <code>NA</code> value very frequently pop up when you try to convert a character vector holding what looks like numbers into a numeric vector. We will see many such examples in the days to come; the conversion is often done using the <code>as.numeric()</code> function. For example, it is quite common that values typed in a spreadsheet contain comments or values which look like this <code>&gt; 50</code> (measurement out of range).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a>imported_data <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"10"</span>, <span class="st">"20"</span>, <span class="st">"30"</span>, <span class="st">"&gt; 50"</span>, <span class="st">"40"</span>, <span class="st">"N.A."</span>, <span class="st">"60 (unsure)"</span>)</span>
<span id="cb59-2"><a href="#cb59-2"></a><span class="co"># this will generate a warning</span></span>
<span id="cb59-3"><a href="#cb59-3"></a>imported_data <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(imported_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: NAs introduced by coercion</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1"></a>imported_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10 20 30 NA 40 NA NA</code></pre>
</div>
</div>
<p>As you can see, R conveniently warns you that some elements of the vector were changed to <code>NA</code>. Look out for that warning!</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Special values
</div>
</div>
<div class="callout-body-container callout-body">
<p>There are a few other special values in R that behave similarly to <code>NA</code>. <code>Inf</code> stands for infinity, you will get it when you divide a positive number by zero: <code>1/0</code>. <code>-Inf</code> is the negative infinity (when you divide a negative number by 0), and <code>NaN</code> stands for “Not a Number” – this is what you get when you try to subtracting <code>Inf - Inf</code> or dividing <code>0/0</code>. They have also other uses – for example, if a function wants to know how many rows of output you would like to see, and your answer is “all of them”, you can use <code>Inf</code> as the number of rows.</p>
</div>
</div>
</section>
</section>
<section id="putting-it-all-together" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="putting-it-all-together"><span class="header-section-number">1.6</span> Putting it all together</h2>
<section id="water-lillies-on-a-lake" class="level3" data-number="1.6.1">
<h3 data-number="1.6.1" class="anchored" data-anchor-id="water-lillies-on-a-lake"><span class="header-section-number">1.6.1</span> Water lillies on a lake</h3>
<p>There is an old puzzle that goes: “On a lake, there is a water lily. Each day the lily doubles in size. After 30 days, the lily covers the entire lake. On which day was the lily covering half of the lake?”.</p>
<p>In the following section we will model the behavior of the lily using R. Let us start with some assumptions. First: we designate the first day as Day 1. Second: every day, the lily doubles the area it covers. Third: on the first day, the lily covers 1% of the lake.</p>
<div class="callout callout-style-simple callout-caution no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exr-lilies" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 1.8 (Modelling water lilies)</strong></span> Take a piece of paper and a pen. Your task is to come up with a formula to describe the area of the lily on the <span class="math inline">\(n\)</span>-th day. Write down the formula.</p>
<p>Hint: if you are stuck, try to calculate the area of the lily on the first few days.</p>
</div>
</div>
</div>
</div>
<p>There is an important point that we wish to demonstrate here. Quite often it pays off to close your laptop and <em>think</em> for a moment what it is it that you want to do, rather than start coding right away. Pen and paper are helpful (we will be making this point again when it comes to visualizations). If you do not have a clear idea of <em>what</em> you want to do, you can get stuck thinking about what you already know how to do.</p>
<p>The formula for calculating the area of the lily on the <span class="math inline">\(n\)</span>-th day is <span class="math inline">\(0.01 \times 2^{n-1}\)</span>. You can come up with that result quite easily if you consider the first few days. On day 1, the area is <span class="math inline">\(1\% = 0.01\)</span>. On day 2, is twice that, that is, <span class="math inline">\(0.01 \times 2 = 0.01 \times 2^1 = 0.02\)</span>. On day 3, it is twice the area from the previous day: <span class="math inline">\(0.02 \times 2 = 0.04 = 0.01 \times 2
\times 2 = 0.01 \times 2^2\)</span>. And again, on day 4, it is <span class="math inline">\(0.01 \times 2^3\)</span>. And so on<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>. We can show it in a table:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 17%">
<col style="width: 20%">
<col style="width: 31%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th>Day</th>
<th>Area</th>
<th>Calculation</th>
<th>Formula</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>0.01</td>
<td><span class="math inline">\(0.01\)</span></td>
<td><span class="math inline">\(0.01 \times 2^0\)</span></td>
</tr>
<tr class="even">
<td>2</td>
<td>0.02</td>
<td><span class="math inline">\(0.01 \times 2\)</span></td>
<td><span class="math inline">\(0.01 \times 2^1\)</span></td>
</tr>
<tr class="odd">
<td>3</td>
<td>0.04</td>
<td><span class="math inline">\(0.01 \times 2 \times 2\)</span></td>
<td><span class="math inline">\(0.01 \times 2^2\)</span></td>
</tr>
<tr class="even">
<td>4</td>
<td>0.08</td>
<td><span class="math inline">\(0.01 \times 2 \times 2 \times 2\)</span></td>
<td><span class="math inline">\(0.01 \times 2^3\)</span></td>
</tr>
<tr class="odd">
<td>5</td>
<td>0.16</td>
<td><span class="math inline">\(0.01 \times 2 \times 2 \times 2 \times 2\)</span></td>
<td><span class="math inline">\(0.01 \times 2^4\)</span></td>
</tr>
</tbody>
</table>
<p>Once we have the formula, it is very easy to calculate the area covered by water lillies on the first 10 days. We will use vectorization to do this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1"></a>days <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb63-2"><a href="#cb63-2"></a>area <span class="ot">&lt;-</span> <span class="fl">0.01</span> <span class="sc">*</span> <span class="dv">2</span><span class="sc">^</span>(days <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb63-3"><a href="#cb63-3"></a>area</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0.01 0.02 0.04 0.08 0.16 0.32 0.64 1.28 2.56 5.12</code></pre>
</div>
</div>
<p>This calls out for a plot. We will talk about visualizations more extensively on Day 5, but for now, we will use a very basic and simple function to plot the area of the lily on the first 30 days. The function is called <code>plot()</code> and can be used to plot a graph of two vectors. The first vector is the days, the second vector is the area.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1"></a><span class="fu">plot</span>(days, area, <span class="at">type=</span><span class="st">"b"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="day1-intro-to-r_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>O-K, days and area are clear, but what is this <code>type="b"</code>? This is a so-called <em>named</em> argument<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>. The <code>plot()</code> function has many arguments, and if you want to use only some of them, you can use their names with an equal sign. You will see that a lot in the days to come. This particular argument, <code>type</code>, tells R what kind of plot to draw. The <code>"b"</code> stands for “both” and tells R to draw both points and lines. If you want only points, you can use <code>"p"</code> (or simple leave the argument out), if you want only lines, you can use <code>"l"</code>.</p>
<p>Note another thing on this plot: after day 7, the area is greater than 1. But 1 means 100%, so after day 7, the lily covers more than the entire lake. Obviously, this is not possible – and it shows a limitation of our model. We can show it by adding a horizontal line to the plot:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1"></a><span class="fu">plot</span>(days, area, <span class="at">type=</span><span class="st">"b"</span>)</span>
<span id="cb66-2"><a href="#cb66-2"></a><span class="fu">abline</span>(<span class="at">h=</span><span class="dv">1</span>, <span class="at">col=</span><span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="day1-intro-to-r_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-caution no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exr-lilies-plot" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 1.9 (Plotting water lilies)</strong></span> &nbsp;</p>
<ul>
<li>Create the same plot using the <code>plot()</code> function, but add, as a parameter, <code>col="blue"</code>. What happens?</li>
<li>Use the argument <code>xlab</code> to label the x-axis with “Day”. Use the argument <code>ylab</code> to label the y-axis with “Area”. Use the argument <code>main</code> to give the plot a title.</li>
<li>Use the argument <code>ylim=c(0, 1)</code> to change the range of the y-axis. How would you change the limit of the x axis?</li>
<li>What is the formula for the area of the lily assuming that each day, the lily covers 1.5 times the area of the previous day?</li>
<li>Create a new area vector (call it <code>area_slow</code>) which will be calculated with the new formula.</li>
<li>Add the new vector to the plot using the function <code>lines()</code>. What does the <code>lines()</code> function do? (Hint: type <code>?lines</code> in the console).</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="functions-in-r" class="level3" data-number="1.6.2">
<h3 data-number="1.6.2" class="anchored" data-anchor-id="functions-in-r"><span class="header-section-number">1.6.2</span> Functions in R</h3>
<p>R is a so-called <em>functional</em> language. This is different from many other languages (including Python). It has some interesting implications which we will partially explore over the next few days. For now, however, we will be content with one important statement: in R, most of the stuff you do, you do using functions. A function takes zero or more arguments and returns exactly one argument.</p>
<p>During this course, we will not really discuss or require creating your own functions. However, we would nonetheless like to show you how it is done. There are two reasons for that. Firstly, it is really, really easy. Secondly, it will help you understand how functions work in R, and that will help you understand how to use functions that others have created.</p>
<p>In the water lilies example we have used a formula to calculate the area of the lily on the <span class="math inline">\(n\)</span>-th day. The formula includes two parameters: the initial fraction of the area covered by the lily on day 1, and the factor by which the area is increased each day. We can create a function that will take three parameters: the day (or days), the initial fraction and the factor, and return the area of the lily on that day. Here is how you can do it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1"></a>area_lily <span class="ot">&lt;-</span> <span class="cf">function</span>(day, fct) {</span>
<span id="cb67-2"><a href="#cb67-2"></a>  ret <span class="ot">&lt;-</span> <span class="fl">0.1</span> <span class="sc">*</span> fct<span class="sc">^</span>(day <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb67-3"><a href="#cb67-3"></a>  <span class="fu">return</span>(ret)</span>
<span id="cb67-4"><a href="#cb67-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>As you can see, the function is created using the <code>function</code> keyword. In parentheses (<code>(</code> and <code>)</code>), you specify the arguments that the function takes, separated by commas. Then comes the body of the function, enclosed in the curly braces (<code>{</code> and <code>}</code>). On the last line of the function code, the <code>return()</code> function is used to return the value of the <code>area_lily</code> function.</p>
<p>One interesting and important fact about the code above is that you use the assignment operator <code>&lt;-</code> to assign the function to a variable. In other words, <code>area_lily</code> is, in fact, a variable! A variable which holds not a value or character string, but computer code that can be used to do stuff.</p>
<p>Once you have run the code above, you can use it to calculate the area of the lily on the first 10 days like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1"></a>area <span class="ot">&lt;-</span> <span class="fu">area_lily</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">2</span>)</span>
<span id="cb68-2"><a href="#cb68-2"></a><span class="fu">print</span>(area)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  0.1  0.2  0.4  0.8  1.6  3.2  6.4 12.8 25.6 51.2</code></pre>
</div>
</div>
<div class="callout callout-style-simple callout-caution no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exr-lilies-plot" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 1.10 (Creating your own function)</strong></span> Modify the <code>area_lily</code> function so that it takes three arguments: the day, the initial fraction and the factor. Use the new function to calculate the area of the lily on the first 10 days with the initial fraction of 0.001 and the factor of 1.5. What is the area on the 10th day?</p>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="coding-practices" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="coding-practices"><span class="header-section-number">1.7</span> Coding practices</h2>
<section id="computer-programs-as-means-for-communication" class="level3" data-number="1.7.1">
<h3 data-number="1.7.1" class="anchored" data-anchor-id="computer-programs-as-means-for-communication"><span class="header-section-number">1.7.1</span> Computer programs as means for communication</h3>
<p>It is now time to conclude today’s lesson with a bit of philosophy. When you write an R script, the first goal you have in mind is to analyse your data – in other words, by means of what you write you are trying the computer to do something for you. That is correct and fine, but there is an important aspect of programming that is often overlooked.</p>
<p>When you write a program, you are writing it not only for the computer, but also for other people. These other people may include your colleagues, readers of your scientific articles, your students, and, last but not least, a future version of yourself. All these people need more then just a piece of code that works. You will quickly find it out yourself when you open a script or a project that you have not been working on for a few months – trust me on this, you will not know what it does, how it does and sometimes even whether you have written it or copied from somewhere.</p>
<p>You might be thinking that you are never willing to show your code to another person. You are wrong, and not only because it is useful <em>to you</em> for another person to review your code. Firstly, you will <em>want</em> to share your code because as a scientist you will want to share your results, and results are nothing if the methods to obtain them are unknown. And secondly, you will <em>need</em> to share your code because you will be asked to do so by your colleagues (yes, I was as surprised as you will be when I was asked to share my code for the first time). And thirdly, your code is part of your methods and you will <em>have</em> to share it when you publish your results<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>.</p>
<p>For communication with another human being to be efficient, you need to make it as clear as possible. There are several ways how to make your code more readable and understandable. Here are some of them.</p>
<p><strong>Comments</strong>. Comments are lines in your code that are not executed. In R, they start with a <code>#</code> sign. Comments help to explain what exactly are you trying to achieve with your code. The old saying goes: “Code tells you how, comments tell you why”. You can hardly overdo with comments, but you can easily underdo.</p>
<p><strong>Naming</strong>. The names of your variables, functions and files should be meaningful. If you have a variable that stores the number of days, call it <code>days</code>, not <code>x</code>. If you have a function that calculates the area of a circle, call it <code>calculate_circle_area()</code>, not <code>f()</code>. If you have a comma separated values (CSV) file that contains the CRP values, call it <code>crp_values.csv</code>, not <code>data.txt</code>.</p>
<p><strong>Formatting</strong>. Your code should be formatted in a consistent way. For example, you should always put a space around your operators, like <code>x &lt;- 2</code> (and not <code>x&lt;-2</code>), you should always put a space after a comma, like <code>c(1, 2)</code> and not <code>c(1,2)</code> (and also not <code>c( 1 , 2 )</code>). Lines should not be too long – 80 characters at most is a good rule of thumb. If a line is too long, you can split it into several lines – R will not mind. See <a href="http://web.stanford.edu/class/cs109l/unrestricted/resources/google-style.html">here</a> for a more detailed guide on how to format your code.</p>
</section>
<section id="example" class="level3" data-number="1.7.2">
<h3 data-number="1.7.2" class="anchored" data-anchor-id="example"><span class="header-section-number">1.7.2</span> Example</h3>
<p>The following fragment of code shows how you should <em>not</em> format your code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1"></a>a<span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb70-2"><a href="#cb70-2"></a>b <span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">10</span>, </span>
<span id="cb70-3"><a href="#cb70-3"></a><span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">5</span>)</span>
<span id="cb70-4"><a href="#cb70-4"></a>r<span class="ot">&lt;-</span><span class="fu">sqrt</span>(<span class="fu">sum</span>((b<span class="sc">-</span><span class="fu">mean</span>(b))<span class="sc">^</span><span class="dv">2</span>)<span class="sc">/</span></span>
<span id="cb70-5"><a href="#cb70-5"></a>               a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The code <em>is</em> correct, but it is hard to read. What does it do, quickly? If you carefuly examine it, you will see that it calculates the standard deviation of the vector <code>b</code>, following the formula</p>
<p><span class="math display">\[SD = \sqrt{\frac{\sum_{i=1}^{n} (x_i - \bar{x})^2}{n-1}}\]</span></p>
<p>where <span class="math inline">\(n\)</span> is the length of the vector <code>b</code>, <span class="math inline">\(x_i\)</span> is the <span class="math inline">\(i\)</span>-th element of the vector <code>b</code> and <span class="math inline">\(\bar{x}\)</span> is the mean of the vector <code>b</code>. However, there are several issues.</p>
<p>Firstly, there are no comments in the code which would give a hint of what it does. Secondly, <span class="math inline">\(n - 1\)</span> (the variable <code>a</code>) is hard encoded - if you modify the vector <code>b</code> by adding one number, the code will execute, but the result will be incorrect.</p>
<p>Thirdly, line 4 combines several operations making it very hard to read. It should be split for clarity. The following code is much more readable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1"></a><span class="co"># ---------------------------------------------------------</span></span>
<span id="cb71-2"><a href="#cb71-2"></a><span class="co"># Calculating the standard deviation of a sample</span></span>
<span id="cb71-3"><a href="#cb71-3"></a><span class="co"># ---------------------------------------------------------</span></span>
<span id="cb71-4"><a href="#cb71-4"></a></span>
<span id="cb71-5"><a href="#cb71-5"></a><span class="co"># example values for five samples</span></span>
<span id="cb71-6"><a href="#cb71-6"></a>samples <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">5</span>)</span>
<span id="cb71-7"><a href="#cb71-7"></a>samples_n <span class="ot">&lt;-</span> <span class="fu">length</span>(samples)</span>
<span id="cb71-8"><a href="#cb71-8"></a></span>
<span id="cb71-9"><a href="#cb71-9"></a><span class="co"># calculate standard deviation of samples manually</span></span>
<span id="cb71-10"><a href="#cb71-10"></a>samples_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(samples)</span>
<span id="cb71-11"><a href="#cb71-11"></a>samples_devs <span class="ot">&lt;-</span> samples <span class="sc">-</span> samples_mean</span>
<span id="cb71-12"><a href="#cb71-12"></a></span>
<span id="cb71-13"><a href="#cb71-13"></a><span class="co"># samples variance</span></span>
<span id="cb71-14"><a href="#cb71-14"></a>samples_var <span class="ot">&lt;-</span> <span class="fu">sum</span>(samples_devs<span class="sc">^</span><span class="dv">2</span>) <span class="sc">/</span> </span>
<span id="cb71-15"><a href="#cb71-15"></a>                (samples_n <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb71-16"><a href="#cb71-16"></a></span>
<span id="cb71-17"><a href="#cb71-17"></a>samples_sd <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(samples_var)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This makes it absolutely clear what you are trying to do, and, in addition, calculates the mean, the deviations, sample length and sample variance – all of which might come in handy later on. Also note of the use of <code># ----</code>… comments. Programmers often use these to highlight the beginning of a new section of code. This is not necessary, but adds to readability. Lines 14 and 15 show how you can split a line of code in a way that is both readable and clear.</p>
<p>Of course, the example is a bit silly – R has a lot of built-in statistical functions, and standard deviation naturally is one of them. You can calculate the standard deviation of a vector <code>b</code> using the <code>sd()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1"></a>samples_sd <span class="ot">&lt;-</span> <span class="fu">sd</span>(samples)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Nonetheless, the principle stands.</p>
</section>
</section>
<section id="review" class="level2" data-number="1.8">
<h2 data-number="1.8" class="anchored" data-anchor-id="review"><span class="header-section-number">1.8</span> Review</h2>
<p>Things that you learned today:</p>
<ul>
<li>Working with R and RStudio
<ul>
<li>Creating and running scripts</li>
<li>Using the console</li>
<li>Using the “Environment” panel of RStudio</li>
<li>Using comments with the <code>#</code> sign</li>
<li>Using tab completion</li>
</ul></li>
<li>Variables
<ul>
<li>Assigning values to variables</li>
<li>Using variables in calculations</li>
<li>Using character variables</li>
<li>pasting together character variables with <code>paste()</code> and <code>paste0()</code></li>
</ul></li>
<li>Vectors
<ul>
<li>Creating vectors with <code>c()</code> and <code>:</code></li>
<li>Accessing elements of a vector with <code>[ ]</code></li>
<li>Named vectors</li>
<li>Assigning values to selected elements</li>
<li>Vectorization</li>
<li>Recycling</li>
</ul></li>
<li>Useful functions
<ul>
<li><code>sqrt()</code>, <code>log()</code>, <code>log2()</code>, <code>log10()</code>, <code>sin()</code>, <code>cos()</code>, <code>tan()</code></li>
<li><code>sum()</code>, <code>mean()</code>, <code>min()</code>, <code>max()</code>, <code>range()</code>, <code>sd()</code>, <code>var()</code>, <code>median()</code>, <code>quantile()</code></li>
</ul></li>
<li>Other
<ul>
<li>The special values <code>NA</code>, <code>Inf</code>, <code>-Inf</code>, <code>NaN</code></li>
<li>Logical values <code>TRUE</code> and <code>FALSE</code></li>
<li>Functions in R</li>
<li>Plotting with <code>plot()</code></li>
<li>Adding parameters to functions</li>
<li>Coding practices</li>
</ul></li>
</ul>
<p>XXX</p>


</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>There are exceptions to this rule, but they are relatively rare and we will not discuss them here.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>If started counting from 0 – that is, if we designated the first day as Day 0 – the formula would be <span class="math inline">\(0.01 \times 2^n\)</span>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Full disclosure: all arguments can be named in R. However, some of the arguments have a default value, so we do not have to specify them unless we need them. The <code>type</code> argument is one of them. Others must always be specified. We will talk about this in more detail later.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Top journals already require that you share your code when you publish your results. This will become more and more common in the future.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./intro.html" class="pagination-link" aria-label="Introduction">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Introduction</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./day2-complex-structures.html" class="pagination-link" aria-label="Day 2: Complex data structures">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Day 2: Complex data structures</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>